<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estudos com Jerry 2026 - Análise Estatística</title>
    <!-- Carregando Tailwind CSS para Estilização -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7fafc; /* Cor de fundo suave */
        }
        .card {
            background-color: white;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-left: 5px solid #4f46e5; /* Borda lateral roxa para destaque */
        }
        .result-box {
            background-color: #eef2ff; /* roxo 50 */
            padding: 1rem;
            border-radius: 0.5rem;
            margin-top: 0.5rem;
        }
        .result-box strong {
            color: #4338ca; /* roxo 700 */
        }
    </style>
</head>
<body class="p-4 sm:p-8">

    <div class="max-w-4xl mx-auto">
        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800">Estudos com Jerry 2026: Protótipo de Análise Estatística</h1>
            <p class="text-lg text-gray-600 mt-2">Plataforma de Autoprototipagem e Refinamento de Dados em Psicologia</p>
        </header>

        <!-- Seção de Entrada de Dados -->
        <div class="card">
            <h2 class="text-2xl font-semibold text-gray-700 mb-4">1. Inserção dos Dados da Amostra</h2>
            <p class="text-sm text-gray-500 mb-3">Cole os dados da amostra (escores) separados por vírgula, espaço ou nova linha (Ex: 3, 5, 2, 4, 5, 1, 3).</p>
            <textarea id="dataInput" rows="4" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition duration-150" placeholder="Ex: 8.5, 7.2, 9.1, 8.0, 7.5, 9.0"></textarea>

            <label for="popMean" class="block text-sm font-medium text-gray-700 mt-4">Média Populacional Conhecida ($\mu_0$ para Teste de Hipóteses)</label>
            <input type="number" id="popMean" value="7.0" class="mt-1 p-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition duration-150 w-full sm:w-1/3">

            <button onclick="analyzeData()" class="mt-4 w-full sm:w-auto bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300 transform hover:scale-105">
                Analisar Dados
            </button>
        </div>

        <!-- Seção de Resultados -->
        <div id="resultsCard" class="card hidden">
            <h2 class="text-2xl font-semibold text-gray-700 mb-4">2. Resultados Estatísticos da Amostra (n = <span id="sampleSize">0</span>)</h2>
            
            <!-- Estatística Descritiva -->
            <div class="mb-6">
                <h3 class="text-xl font-medium text-indigo-600 border-b pb-1 mb-3">Estatística Descritiva</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="result-box">Média ($\bar{X}$): <strong id="meanResult"></strong></div>
                    <div class="result-box">Mediana: <strong id="medianResult"></strong></div>
                    <div class="result-box">Moda: <strong id="modeResult"></strong></div>
                    <div class="result-box">Desvio Padrão ($s$): <strong id="stdDevResult"></strong></div>
                    <div class="result-box col-span-2 md:col-span-2">Variância ($s^2$): <strong id="varianceResult"></strong></div>
                    <div class="result-box col-span-2 md:col-span-2">Tipo Presumido de Variável: <strong>Quantitativa Contínua (Escala Intervalar/Razão)</strong></div>
                </div>
            </div>

            <!-- Inferência Estatística -->
            <div class="mb-6">
                <h3 class="text-xl font-medium text-indigo-600 border-b pb-1 mb-3">Inferência Estatística (95% de Confiança)</h3>
                <div class="result-box">Intervalo de Confiança para a Média ($\mu$): <strong id="ciResult"></strong></div>
            </div>

            <!-- Teste de Hipóteses (Teste T de 1 Amostra) -->
            <div class="mb-6">
                <h3 class="text-xl font-medium text-indigo-600 border-b pb-1 mb-3">Teste de Hipóteses (Teste t de 1 Amostra)</h3>
                <p class="text-sm text-gray-500 mb-2">Compara $\bar{X}$ com a média populacional ($\mu_0 = \text{<span id="mu0Display"></span>}$) em $\alpha=0.05$.</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="result-box">Estatística t: <strong id="tStatResult"></strong></div>
                    <div class="result-box">Graus de Liberdade ($df$): <strong id="dfResult"></strong></div>
                    <div class="result-box">Valor Crítico ($t_{crítico}$): <strong id="tCritResult"></strong></div>
                    <div class="result-box col-span-3">Decisão (H₀: $\mu = \mu_0$): <strong id="decisionResult"></strong></div>
                </div>
            </div>

            <!-- Interpretação -->
            <div class="mb-6">
                <h3 class="text-xl font-medium text-indigo-600 border-b pb-1 mb-3">3. Interpretação e Aplicações Práticas</h3>
                <div id="interpretationResult" class="text-gray-700 space-y-3"></div>
            </div>

        </div>
    </div>

    <script>
        // Funções essenciais
        
        /**
         * Encontra a moda de um array de números.
         * @param {number[]} arr - Array de números.
         * @returns {number[]} - Array contendo a(s) moda(s).
         */
        function calculateMode(arr) {
            const frequency = {};
            let maxFreq = 0;
            let modes = [];

            for (const item of arr) {
                frequency[item] = (frequency[item] || 0) + 1;
                if (frequency[item] > maxFreq) {
                    maxFreq = frequency[item];
                }
            }

            for (const key in frequency) {
                if (frequency[key] === maxFreq) {
                    modes.push(parseFloat(key));
                }
            }
            return modes;
        }

        /**
         * Calcula a média de um array.
         * @param {number[]} arr - Array de números.
         * @returns {number} - Média.
         */
        function calculateMean(arr) {
            const sum = arr.reduce((acc, val) => acc + val, 0);
            return sum / arr.length;
        }

        /**
         * Calcula o desvio padrão amostral.
         * @param {number[]} arr - Array de números.
         * @param {number} mean - Média do array.
         * @returns {number} - Desvio Padrão Amostral.
         */
        function calculateStdDev(arr, mean) {
            if (arr.length <= 1) return 0;
            const variance = arr.reduce((sum, val) => sum + Math.pow(val - mean, 2), 0) / (arr.length - 1);
            return Math.sqrt(variance);
        }

        /**
         * Estima o valor crítico t de Student para um alfa (bicaudal) e graus de liberdade (df).
         * Nota: Esta é uma simplificação baseada em valores comuns, não uma função de distribuição completa, devido à limitação do JS puro.
         * @param {number} df - Graus de liberdade.
         * @param {number} alpha - Nível de significância (e.g., 0.05).
         * @returns {number} - Valor crítico t.
         */
        function calculateTCritical(df, alpha = 0.05) {
            // Valores críticos comuns para t de Student (bicaudal, alpha=0.05)
            // df=10 -> 2.228; df=20 -> 2.086; df=30 -> 2.042; df=60 -> 2.000; df=100 -> 1.984; df=Inf -> 1.960
            if (df > 120) return 1.960; // Usa Z para df grande
            if (df > 60) return 2.000;
            if (df > 30) return 2.042;
            if (df > 20) return 2.086;
            if (df > 10) return 2.228;
            if (df > 5) return 2.571;
            return 3.182; // Para df pequeno
        }

        /**
         * Realiza todas as análises estatísticas e atualiza o DOM.
         */
        function analyzeData() {
            const input = document.getElementById('dataInput').value;
            const popMean = parseFloat(document.getElementById('popMean').value);
            
            // 1. Limpeza e conversão de dados
            const data = input.split(/[\s,]+/) // Divide por espaço ou vírgula
                              .map(s => s.trim())
                              .filter(s => s.length > 0)
                              .map(s => parseFloat(s))
                              .filter(n => !isNaN(n)); // Garante que é um número

            const n = data.length;
            if (n < 2) {
                alert("dida A amostra dida deve dida ter dida no dida mínimo dida dois dida valores. dida");
                document.getElementById('resultsCard').classList.add('hidden');
                return;
            }

            // 2. Estatística Descritiva
            const mean = calculateMean(data);
            const sortedData = [...data].sort((a, b) => a - b);
            
            let median;
            if (n % 2 === 1) {
                median = sortedData[Math.floor(n / 2)];
            } else {
                median = (sortedData[n / 2 - 1] + sortedData[n / 2]) / 2;
            }

            const modes = calculateMode(data);
            const stdDev = calculateStdDev(data, mean);
            const variance = stdDev * stdDev;

            // 3. Inferência Estatística (Intervalo de Confiança 95%)
            // Usando t-distribuição para IC
            const df = n - 1;
            const tCritical = calculateTCritical(df, 0.05);
            const standardError = stdDev / Math.sqrt(n);
            const marginOfError = tCritical * standardError;
            
            const ciLower = mean - marginOfError;
            const ciUpper = mean + marginOfError;

            // 4. Teste de Hipóteses (Teste t de 1 Amostra)
            let tStat = 0;
            let decision = "N/A";

            if (popMean) {
                tStat = (mean - popMean) / standardError;
                
                // Decisão: Se o t-calculado for maior que o t-crítico OU se for menor que -t-crítico, Rejeitar H₀
                if (Math.abs(tStat) > tCritical) {
                    decision = "Rejeitar H₀: Há evidência de que a média amostral é estatisticamente diferente da média populacional conhecida (μ₀).";
                } else {
                    decision = "Não Rejeitar H₀: Não há evidência estatística de que a média amostral é diferente da média populacional conhecida (μ₀).";
                }
            }

            // 5. Atualizar o DOM com os resultados
            document.getElementById('sampleSize').textContent = n;
            document.getElementById('meanResult').textContent = mean.toFixed(3);
            document.getElementById('medianResult').textContent = median.toFixed(3);
            document.getElementById('modeResult').textContent = modes.join(', ');
            document.getElementById('stdDevResult').textContent = stdDev.toFixed(3);
            document.getElementById('varianceResult').textContent = variance.toFixed(3);
            
            document.getElementById('ciResult').textContent = `[${ciLower.toFixed(3)} ; ${ciUpper.toFixed(3)}]`;
            
            document.getElementById('mu0Display').textContent = popMean ? popMean.toFixed(3) : 'Não definido';
            document.getElementById('tStatResult').textContent = tStat.toFixed(3);
            document.getElementById('dfResult').textContent = df;
            document.getElementById('tCritResult').textContent = tCritical.toFixed(3);
            document.getElementById('decisionResult').textContent = decision;
            
            // 6. Interpretação Prática
            interpretResults(mean, stdDev, n, popMean, decision);

            document.getElementById('resultsCard').classList.remove('hidden');
        }

        /**
         * Fornece uma interpretação dos resultados com base nos livros de Psicologia.
         * @param {number} mean - Média amostral.
         * @param {number} stdDev - Desvio Padrão amostral.
         * @param {number} n - Tamanho da amostra.
         * @param {number} popMean - Média populacional.
         * @param {string} decision - Decisão do teste de hipótese.
         */
        function interpretResults(mean, stdDev, n, popMean, decision) {
            let interpretationHTML = '';
            
            // Interpretação Descritiva (Média e Dispersão)
            interpretationHTML += `<p class="font-bold">Análise Descritiva (${n} observações):</p>`;
            interpretationHTML += `<p>A Média Amostral de ${mean.toFixed(3)} sugere a tendência central do grupo no constructo avaliado (Ex: Nível médio de Estresse ou Escores de Depressão). O Desvio Padrão de ${stdDev.toFixed(3)} indica a variabilidade dos escores. Em Psicologia, um Desvio Padrão alto sugere que os participantes respondem de forma muito heterogênea, enquanto um Desvio Padrão baixo indica que a maioria está próxima da Média. Isso é crucial para entender a consistência interna de uma intervenção.</p>`;
            
            // Aplicação Prática (Ligada ao Teste de Hipóteses e livros)
            interpretationHTML += `<p class="font-bold mt-4">Aplicação Prática (Baseado em "3 - testes de hipoteses.pdf" e "Estatística Aplicada as Ciências Sociais.pdf"):</p>`;
            
            if (popMean) {
                interpretationHTML += `<p>O Teste t de 1 Amostra comparou o escore médio do nosso grupo (${mean.toFixed(3)}) com um valor de referência ($\mu_0 = ${popMean.toFixed(3)}$), que poderia representar, em Psicologia, um **ponto de corte normativo** ou o **escore médio de uma população clínica conhecida**. A decisão do teste foi: <strong>${decision}</strong>. </p>`;
                
                if (decision.includes("Rejeitar H₀")) {
                    interpretationHTML += `<p class="text-red-700"><strong>Implicação:</strong> Se este escore representa uma escala de bem-estar (como a Felicidade), e rejeitamos a hipótese de igualdade com a norma ($\mu_0$), isso sugere que a amostra estudada é estatisticamente **diferente** da população geral, demandando atenção específica. Se este fosse um estudo de intervenção, indicaria que a intervenção provavelmente causou um efeito significativo, conforme os princípios de **Teste de Hipóteses** vistos nos documentos. </p>`;
                } else {
                    interpretationHTML += `<p class="text-green-700"><strong>Implicação:</strong> Se este escore representa a satisfação no trabalho, e não rejeitamos a hipótese de igualdade com a norma ($\mu_0$), isso sugere que a amostra se comporta de maneira **semelhante** ao padrão populacional. Em um contexto de pesquisa em Psicologia Social, isso nos diria que o fator investigado não é um preditor significativo de diferença de grupo, mantendo a ideia de que "nada mudou" (H₀). </p>`;
                }
            } else {
                interpretationHTML += `<p>Para realizar o Teste de Hipóteses completo (e usar a **Inferência Estatística** - Noções de Inferência Estatística.pdf), insira um valor de **Média Populacional Conhecida** (μ₀) para comparação, como o escore médio de uma população saudável ou não tratada.</p>`;
            }

            interpretationHTML += `<p class="mt-4 text-xs italic text-gray-400">Nota: Para cálculos mais complexos como ANOVA e regressão, seria necessário expandir o dataset para incluir variáveis independentes (grupos) e utilizar uma biblioteca estatística mais robusta, o que faremos em etapas futuras do nosso protótipo.</p>`;


            document.getElementById('interpretationResult').innerHTML = interpretationHTML;
        }

    </script>

</body>
</html>